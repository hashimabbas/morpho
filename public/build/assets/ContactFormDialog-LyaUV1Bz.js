import{m as F,r as E,j as e}from"./app-C0bCcz04.js";import{B as v}from"./button-CN3eThEU.js";import{D as I,a as L,b as V,c as A,d as B,e as O}from"./dialog-Dwnkwhs4.js";import{L as r,I as m}from"./label-BjaaAITA.js";import{S as N,a as f,b as _,c as C,d as i}from"./select-Dfjh9vRR.js";import c from"./input-error-D8FUymb5.js";import"./index-DBLl8gxW.js";import"./clsx-B-dksMZM.js";import"./utils-DVM6Vl9F.js";import"./bundle-mjs-AdmevC4f.js";import"./index-CKq3111K.js";import"./index-DKG84GgK.js";import"./Combination-CxaGOqTI.js";import"./x-BpTDSu6e.js";import"./createLucideIcon-D2Rt_upC.js";import"./index-C3aENh6z.js";import"./index-DCh8b8Vn.js";import"./index-tfettubW.js";import"./floating-ui.react-dom-B6K4_d3Y.js";import"./index-BTx_uXrW.js";import"./chevron-down-DKxKomFH.js";import"./check-DfQ8mDjM.js";function le({isOpen:p,onClose:g,contact:a,users:S}){var j;const{data:l,setData:t,post:y,patch:w,processing:h,errors:n,reset:x,clearErrors:b}=F({first_name:"",last_name:"",email:"",phone:"",company:"",status:"lead",owner_id:null}),o=!!a;E.useEffect(()=>{p&&o?t({first_name:a.first_name||"",last_name:a.last_name||"",email:a.email||"",phone:a.phone||"",company:a.company||"",status:a.status||"lead",owner_id:a.owner_id||null}):x()},[p,a,o]);const D=s=>{s.preventDefault();const d={onSuccess:()=>{g()},preserveScroll:!0};o?w(route("dashboard.contacts.update",a.id),d):y(route("dashboard.contacts.store"),d)},u=()=>{h||(b(),x(),g())};return e.jsx(I,{open:p,onOpenChange:u,children:e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(V,{children:[e.jsx(A,{children:o?"Edit Contact":"Create New Contact"}),e.jsx(B,{children:o?"Update the details for this contact.":"Fill in the details for the new contact."})]}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"first_name",className:"text-right",children:"First Name"}),e.jsx(m,{id:"first_name",value:l.first_name,onChange:s=>t("first_name",s.target.value),className:"col-span-3"}),e.jsx(c,{message:n.first_name,className:"col-span-4 col-start-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"last_name",className:"text-right",children:"Last Name"}),e.jsx(m,{id:"last_name",value:l.last_name,onChange:s=>t("last_name",s.target.value),className:"col-span-3"}),e.jsx(c,{message:n.last_name,className:"col-span-4 col-start-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"email",className:"text-right",children:"Email"}),e.jsx(m,{id:"email",type:"email",value:l.email,onChange:s=>t("email",s.target.value),className:"col-span-3"}),e.jsx(c,{message:n.email,className:"col-span-4 col-start-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"phone",className:"text-right",children:"Phone"}),e.jsx(m,{id:"phone",value:l.phone||"",onChange:s=>t("phone",s.target.value),className:"col-span-3"}),e.jsx(c,{message:n.phone,className:"col-span-4 col-start-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"company",className:"text-right",children:"Company"}),e.jsx(m,{id:"company",value:l.company||"",onChange:s=>t("company",s.target.value),className:"col-span-3"}),e.jsx(c,{message:n.company,className:"col-span-4 col-start-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"status",className:"text-right",children:"Status"}),e.jsxs(N,{onValueChange:s=>t("status",s),value:l.status,children:[e.jsx(f,{className:"col-span-3",children:e.jsx(_,{placeholder:"Select a status"})}),e.jsxs(C,{children:[e.jsx(i,{value:"lead",children:"Lead"}),e.jsx(i,{value:"opportunity",children:"Opportunity"}),e.jsx(i,{value:"customer",children:"Customer"}),e.jsx(i,{value:"archived",children:"Archived"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(r,{htmlFor:"owner",className:"text-right",children:"Owner"}),e.jsxs(N,{value:((j=l.owner_id)==null?void 0:j.toString())??"",onValueChange:s=>{const d=s==="unassigned"?null:Number(s);t("owner_id",d)},children:[e.jsx(f,{className:"col-span-3",children:e.jsx(_,{placeholder:"Assign an owner"})}),e.jsxs(C,{children:[e.jsx(i,{value:"unassigned",children:"Unassigned"}),S.map(s=>e.jsx(i,{value:s.id.toString(),children:s.name},s.id))]})]})]})]}),e.jsxs(O,{children:[e.jsx(v,{type:"button",variant:"ghost",onClick:u,children:"Cancel"}),e.jsx(v,{type:"submit",disabled:h,children:h?"Saving...":"Save"})]})]})]})})}export{le as default};
