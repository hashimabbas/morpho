import{r as d,j as e,L as R,$,S as u}from"./app-DnlFA4BQ.js";import{A as M}from"./app-layout-BDGpe5zg.js";import{B as H}from"./button-DaQVG_Lm.js";import{D as I,a as A,b as L,c as T,d as P}from"./dialog-COxk1sbQ.js";import{I as O,L as o}from"./label-BE2wI-tZ.js";import{C as y}from"./checkbox-DCnZVnvu.js";import{c as z,S as f,u as m,w as B}from"./index.module-OhUXnTS3.js";import{D as G}from"./download-CP3iN2vy.js";import{f as x}from"./format-CBpsKyOP.js";import"./index-BG-7mJD5.js";import"./utils-DVM6Vl9F.js";import"./clsx-B-dksMZM.js";import"./bundle-mjs-AdmevC4f.js";import"./index-2QCU2uMQ.js";import"./index-CSD3SK5X.js";import"./Combination-Bg0WKY1g.js";import"./x-ClWP5hoH.js";import"./createLucideIcon-CJzuDKRp.js";import"./tooltip-DxhYmu4R.js";import"./index-CbgzFFyA.js";import"./index-7N00ZXT_.js";import"./index-D2sJeEaC.js";import"./floating-ui.react-dom-CAtgCL9s.js";import"./index-DldQGjXu.js";import"./dropdown-menu-BnAx4_VL.js";import"./avatar-BAbIs_l5.js";import"./app-logo-icon-2v8myURF.js";import"./mail-CFOCT9o2.js";import"./chevron-right-CSNE8F0e.js";import"./index-BFwvBKHJ.js";import"./check-CtLgWPpr.js";const J=[{title:"Dashboard",href:route("dashboard.index")},{title:"Demo Requests",href:route("dashboard.demo-requests.index"),isCurrent:!0}],K={data:[],links:[],from:0,to:0,total:0},Q={search:null,filter:null};function we(j){const{requests:t=K,filters:b=Q}=j,[a,N]=d.useState(null),[v,g]=d.useState(!1),[i,n]=d.useState([]),[k,_]=d.useState(b.search||""),[w,h]=d.useState(!1);d.useEffect(()=>{n([])},[t.total]);const S=z(s=>{u.get(route("dashboard.demo-requests.index"),{search:s},{preserveState:!0,replace:!0,preserveScroll:!0})},300),D=s=>{N(s),g(!0),s.is_read||u.post(route("dashboard.demo-requests.markAsRead",s.id),{},{preserveScroll:!0})},q=s=>{n(l=>l.includes(s)?l.filter(c=>c!==s):[...l,s])},C=()=>{i.length===t.data.length?n([]):n(t.data.map(s=>s.id))},E=()=>{if(i.length===0){alert("Please select demo requests to export.");return}h(!0);const l=t.data.filter(r=>i.includes(r.id)).map(r=>({"Full Name":r.full_name,Company:r.company_name,Email:r.email,Phone:r.phone,Sector:r.logistics_sector,Solution:r.solution_type,Goal:r.demo_goal,"Requested At":x(new Date(r.created_at),"yyyy-MM-dd HH:mm:ss")})),c=m.json_to_sheet(l),p=m.book_new();m.book_append_sheet(p,c,"Demo Requests"),B(p,"DemoRequests.xlsx"),h(!1)},F=t.data.length>0&&i.length===t.data.length;return e.jsxs(M,{breadcrumbs:J,children:[e.jsx(R,{title:"Demo Requests"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-hidden",children:e.jsxs("div",{className:"flex-1 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border dark:bg-gray-800 flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Demo Requests"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:"Manage and review demo requests from users."})]}),e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50/50 dark:bg-gray-800/50 border-b border-gray-200 dark:border-gray-700",children:[e.jsx(y,{checked:F,onCheckedChange:C}),e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(f,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx(O,{type:"search",placeholder:"Search by name, company, email...",value:k,onChange:s=>{_(s.target.value),S(s.target.value)},className:"pl-9"})]}),e.jsxs(H,{variant:"outline",onClick:E,disabled:i.length===0||w,className:"ml-auto",children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Export ",i.length>0?`${i.length} Selected`:""]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t.data.length>0?e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.data.map(s=>e.jsxs("div",{className:`flex w-full items-start gap-4 p-4 text-left cursor-pointer ${s.is_read?"bg-white dark:bg-gray-800":"bg-blue-50 dark:bg-gray-700/50"}`,onClick:()=>D(s),children:[e.jsx(y,{checked:i.includes(s.id),onCheckedChange:()=>q(s.id),className:"mt-1"}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-sm truncate pr-4 ${!s.is_read&&"font-semibold"} ${s.is_read?"text-gray-900 dark:text-gray-100":"text-blue-700 dark:text-blue-200"}`,children:[s.full_name," ",e.jsxs("span",{className:"text-gray-500 font-normal",children:["(",s.email,")"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 flex-shrink-0",children:x(new Date(s.created_at),"MMM dd, yyyy HH:mm")})]}),e.jsxs("p",{className:`mt-1 truncate text-sm ${s.is_read?"text-gray-600 dark:text-gray-300":"text-gray-800 dark:text-gray-100"}`,children:[s.company_name," - ",s.solution_type]})]})]},s.id))}):e.jsxs("div",{className:"mt-4 rounded-md p-12 text-center",children:[e.jsx(f,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900 dark:text-gray-100",children:"No demo requests found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Try adjusting your search."})]})}),t.links.length>3&&e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Showing ",e.jsx("span",{className:"font-medium",children:t.from})," to ",e.jsx("span",{className:"font-medium",children:t.to})," of"," ",e.jsx("span",{className:"font-medium",children:t.total})," results"]}),e.jsx("nav",{className:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination",children:t.links.map((s,l)=>e.jsx($,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 text-sm font-semibold ring-1 ring-inset ring-gray-300 focus:z-20 dark:ring-gray-600 ${s.active?"z-10 bg-indigo-600 text-white":"text-gray-900 hover:bg-gray-50 dark:text-gray-100 dark:hover:bg-gray-700"} ${s.url===null?"cursor-not-allowed opacity-50":""} ${l===0?"rounded-l-md":""} ${l===t.links.length-1?"rounded-r-md":""}`,preserveScroll:!0,dangerouslySetInnerHTML:{__html:s.label}},l))})]})]})}),e.jsx(I,{open:v,onOpenChange:g,children:e.jsxs(A,{className:"sm:max-w-[700px]",children:[e.jsxs(L,{children:[e.jsxs(T,{children:["Demo Request from ",a==null?void 0:a.full_name]}),e.jsxs(P,{className:"text-sm text-gray-500 dark:text-gray-400",children:["Received on"," ",a!=null&&a.created_at?x(new Date(a.created_at),"EEEE, MMM dd, yyyy HH:mm"):""]})]}),a&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"fullName",className:"text-right",children:"Full Name:"}),e.jsx("span",{id:"fullName",className:"col-span-3 font-medium",children:a.full_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"company",className:"text-right",children:"Company:"}),e.jsx("span",{id:"company",className:"col-span-3 font-medium",children:a.company_name})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"email",className:"text-right",children:"Email:"}),e.jsx("span",{id:"email",className:"col-span-3 font-medium",children:a.email})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"phone",className:"text-right",children:"Phone:"}),e.jsx("span",{id:"phone",className:"col-span-3 font-medium",children:a.phone})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"sector",className:"text-right",children:"Sector:"}),e.jsx("span",{id:"sector",className:"col-span-3 font-medium",children:a.logistics_sector})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(o,{htmlFor:"solution",className:"text-right",children:"Solution:"}),e.jsx("span",{id:"solution",className:"col-span-3 font-medium",children:a.solution_type})]}),e.jsxs("div",{className:"grid grid-cols-4 items-start gap-4 mt-2",children:[e.jsx(o,{htmlFor:"goal",className:"text-right pt-2",children:"Goal:"}),e.jsx("div",{id:"goal",className:"col-span-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-md border border-gray-200 dark:border-gray-600 max-h-[300px] overflow-y-auto whitespace-pre-wrap text-sm text-gray-700 dark:text-gray-200",children:a.demo_goal})]})]})]})})]})}export{we as default};
